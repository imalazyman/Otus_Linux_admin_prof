# roles/monitoring/templates/prometheus.yml.j2
global:
  scrape_interval: 15s
  evaluation_interval: 15s

# rule_files:
  # - "/etc/prometheus/alert-rules.yml"

scrape_configs:
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']

  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'loki'
    static_configs:
      - targets: ['loki:3100']

  - job_name: 'webservers'
    static_configs:
      - targets: ['192.168.56.10:9100'] 
    scrape_interval: 30s

  - job_name: 'db-1-srv'
    static_configs:
      - targets: ['192.168.56.11:9100']
    scrape_interval: 30s

  - job_name: 'db-2-srv'
    static_configs:
      - targets: ['192.168.56.12:9100']
    scrape_interval: 30s

  - job_name: 'mariadb-primary'
    static_configs:
      - targets: ['mysqld-exporter-primary:9104']
    metrics_path: /metrics
    scrape_interval: 30s

  - job_name: 'mariadb-replica'
    static_configs:
      - targets: ['mysqld-exporter-replica:9104']
    metrics_path: /metrics
    scrape_interval: 30s

  - job_name: 'backup'
    static_configs:
      - targets: ['192.168.56.14:9100']  # ‚Üê IP ansible-srv
    scrape_interval: 30s